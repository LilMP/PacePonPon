<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PacePonPon</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" type="image/x-icon" href="icons8-exercise-96.png">
</head>
<body>
    <div>
        <h1 class="box" style="margin:0;">Pace朋朋<img id="logo" src="icons8-exercise-96.png" alt="logo"></h1>
        <div class="footer">你的配速換算好朋友</div>
        <div class="footer float-right">
            all icons by：<a class="" target="_blank" href="https://icons8.com" >Icons8</a><img id="icons8" src="icons8.png" alt="icons8"><br>
            小M平的<a class="" target="_blank" href="https://reurl.cc/DoYp8N">跑步宇宙</a>🌌<br>
            喜歡的話不妨請我<a class="" target="_blank" href="https://lilmp.soci.vip">喝杯咖啡</a>☕
        </div>
        <!-- <h1 class="box">名字還在想</h1> -->
        <!-- <h2 class="box">還在想</h2> -->
        <hr width="100%" style="margin: 0 0 1em 0;">
        <!-- <input type="radio" onchange="ChangeOption(this)" id="c_pace" name="type" value="pace" checked><label for="pace">配速</label><input type="text" name="" id="pace_input" placeholder="ex: 3:15" size="5" maxlength="4" onclick="this.select()">/km<br> -->
        <div class="box">
            <label>
                <input class="hidden-radio" type="radio" onclick="ChangeOption(this)" id="c_pace" name="type" value="pace" checked>
                <div class="row">
                    <img src="speedometer.png" alt="Option 1"><span>配速　</span>
                </div>
            </label>
            <input class="pace_input" type="number" name="" id="pace_input" placeholder="3" onclick="this.select()" onkeyup="Calculate2()" autofocus><span>:</span><input class="pace_input" type="number" name="" id="pace_input2" placeholder="30" onclick="this.select()" onkeyup="Calculate2()"><span>/km</span>
        </div>

        <div class="box">
            <label>
                <input class="hidden-radio" type="radio" onclick="ChangeOption(this)" id="c_track" name="type" value="track">
                <div class="row">
                    <img src="track.png" alt="Option 2"><span>田徑場</span>
                    
                </div>
            </label>
            <select id="laneNumber" onchange="ChangeLane(this)" style="margin-right: 0.5em;">
                <option value="400">1道</option>
                <option value="408">2道</option>
                <option value="415">3道</option>
                <option value="423">4道</option>
                <option value="430">5道</option>
                <option value="438">6道</option>
                <option value="445">7道</option>
                <option value="453">8道</option>
            </select>
            <input type="number" name="" id="track_input" placeholder="" size="4" maxlength="4" onclick="this.select()" onkeyup="Calculate2()" disabled><span>秒/圈</span>
            <button id='slide-button'>+</button>
        </div>
        <!-- <div class="" style="display: none;">
            <div class="box indent-text ">  -->
                <!-- 舊版/正常版 -->
                <!-- <label><input class="hidden-radio increment" type="radio" onchange="ChangeOption(this)" id="c_track100" name="type" value="m100">100m: </label><input class="increment" type="text" name="" id="m100_input" placeholder="" size="1" onkeyup="Calculate2()" disabled> 秒<br> -->
                <!-- <label><input class="hidden-radio increment" type="radio" onchange="ChangeOption(this)" id="c_track200" name="type" value="m200">200m: </label><input class="increment" type="text" name="" id="m200_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m200_increment" placeholder="" disabled><br> -->
                <!-- <label><input class="hidden-radio increment" type="radio" onchange="ChangeOption(this)" id="c_track300" name="type" value="m300">300m: </label><input class="increment" type="text" name="" id="m300_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m300_increment" placeholder="" disabled><br> -->
                <!-- <label><input class="hidden-radio increment" type="radio" onchange="ChangeOption(this)" id="c_track400" name="type" value="m400">400m: </label><input class="increment" type="text" name="" id="m400_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m400_increment" placeholder="" disabled><br> -->
                <!-- 測試版 -->
                <!-- <div style="display: inline;" class="increment">100m: </div><input class="increment" type="text" name="" id="m100_input" placeholder="" size="1" disabled><br>
                <div style="display: inline;" class="increment">200m: </div><input class="increment" type="text" name="" id="m200_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m200_increment" placeholder="" disabled><br>
                <div style="display: inline;" class="increment">300m: </div><input class="increment" type="text" name="" id="m300_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m300_increment" placeholder="" disabled><br>
                <div style="display: inline;" class="increment">400m: </div><input class="increment" type="text" name="" id="m400_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m400_increment" placeholder="" disabled><br> -->

        <div class='container animation SlideDown' id='container' >
            <div id="lane-length">第1道　400m</div>
            <div class="box indent-text" > 
                <!-- <label><input class="hidden-radio" type="radio" onchange="ChangeOption(this)" id="c_track100" name="type" value="m100">100m: </label><input type="text" name="" id="m100_input" placeholder="" size="1" onkeyup="Calculate2()" disabled> 秒<br> -->
                <!-- <label><input class="hidden-radio" type="radio" onchange="ChangeOption(this)" id="c_track200" name="type" value="m200">200m: </label><input type="text" name="" id="m200_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m200_increment" placeholder="" disabled><br> -->
                <!-- <label><input class="hidden-radio" type="radio" onchange="ChangeOption(this)" id="c_track300" name="type" value="m300">300m: </label><input type="text" name="" id="m300_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m300_increment" placeholder="" disabled><br> -->
                <!-- <label><input class="hidden-radio" type="radio" onchange="ChangeOption(this)" id="c_track400" name="type" value="m400">400m: </label><input type="text" name="" id="m400_input" placeholder="" size="1" onkeyup="Calculate2()"  disabled> 秒<input class="increment" type="text" name="" id="m400_increment" placeholder="" disabled><br> -->
                <div style="display: inline;" class="increment">100m　</div><input class="increment input-right" type="text" name="" id="m100_input" placeholder="" size="1" disabled><br>
                <div style="display: inline;" class="increment">200m　</div><input class="increment input-right" type="text" name="" id="m200_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m200_increment" placeholder="" disabled><br>
                <div style="display: inline;" class="increment">300m　</div><input class="increment input-right" type="text" name="" id="m300_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m300_increment" placeholder="" disabled><br>
                <div style="display: inline;" class="increment">400m　</div><input class="increment input-right" type="text" name="" id="m400_input" placeholder="" size="1" disabled><input class="increment" type="text" name="" id="m400_increment" placeholder="" disabled><br>
            </div>
            <div id="laps-result2" class="indent-text">
                <div style="display: inline;" class="increment">跑2圈<span id="twolaps">&emsp;(800m)</span>　</div><input class="increment input-right" type="text" name="" id="m800_input" placeholder="" size="1" disabled><br>
                <!-- <input class="increment" type="text" name="" id="m800_increment" placeholder="" disabled><br> -->
                <div style="display: inline;" class="increment">跑3圈 <span id="threelaps">(1200m)</span>　</div><input class="increment input-right" type="text" name="" id="m1200_input" placeholder="" size="1" disabled><br>
                <!-- <input class="increment" type="text" name="" id="m1200_increment" placeholder="" disabled><br> -->
                <div style="display: inline;" class="increment">跑4圈 <span id="fourlaps">(1600m)</span>　</div><input class="increment input-right" type="text" name="" id="m1600_input" placeholder="" size="1" disabled><br>
                <!-- <input class="increment" type="text" name="" id="m1600_increment" placeholder="" disabled><br> -->
                <div style="display: inline;" class="increment">跑5圈 <span id="fivelaps">(2000m)</span>　</div><input class="increment input-right" type="text" name="" id="m2000_input" placeholder="" size="1" disabled><br>
                <!-- <input class="increment" type="text" name="" id="m2000_increment" placeholder="" disabled><br> -->
            </div>
        </div>

        
        
        <div class="box">    
            <label>
                <input class="hidden-radio" type="radio" onclick="ChangeOption(this)" id="c_treadmill" name="type" value="treadmill">
                <div class="row">
                    <img src="treadmill.png" alt="Option 3"><span>跑步機</span>
                </div>
            </label>
            <input type="number" name="" id="treadmill_input" placeholder="" size="6" maxlength="4" onclick="this.select()" onkeyup="Calculate2()" disabled ><span>km/h</span>
        </div> 
        <!-- <button class="" id='calBtn' onclick="Calculate()">Enter</button> -->
        <!-- <hr> -->
        <!-- <hr> -->
        <!-- new feature race distance btn -->
        <!-- <div>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_track_800" name="road" value="800" checked><label for="c_track_800">800m</label>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_track_1500" name="road" value="1500"><label for="c_track_1500">1500m</label>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_track_5000" name="road" value="5000"><label for="c_track_5000">5k</label>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_track_10000" name="road" value="10000"><label for="c_track_10000">10k</label>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_road_half" name="road" value="21097.5"><label for="c_road_half">半馬</label>
            <input type="radio" onchange="ChangeDistance(this.value)" id="c_road_full" name="road" value="42195"><label for="c_road_full">全馬</label>    
        </div> -->

    
    
    
        <!-- <input type="radio" onchange="ChangeOption(this)" id="c_finish_time" name="type" value="finish_time"><label for="c_finish_time">完成時間: </label><input type="text" name="" id="finish_time_input" placeholder="分:秒 or 時:分:秒" size="11" onchange="Calculate2()"  disabled> -->
        <div class="box">    
            <label>
                <input class="hidden-radio" type="radio" onclick="ChangeOption(this)" id="c_finish_time" name="type" value="finish_time">
                <div class="row">
                    <img src="stopwatch.png" alt="Option 3"><span>時間　</span>
                </div>
                            
                <select id="dropdown" onchange="ChangeDistance(this.value)" style="margin-right: 0.5em;">
                    <option value="">距離</option>
                    <option value="800">800m</option>
                    <option value="1500">1500m</option>
                    <option value="3000">3k</option>
                    <option value="5000">5k</option>
                    <option value="10000">10k</option>
                    <option value="21097.5">半馬</option>
                    <option value="42195">全馬</option>
                </select>
        
                <input type="text" name="" id="finish_time_input" placeholder="" size="8" onclick="this.select()" onkeyup="Calculate2()" disabled >

            </label>
        </div> 
        <!-- <div class="footer" ><a target="_blank" href="https://icons8.com/icon/iK0ZhsguDd3G/running-track">Running Track</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a></div> -->
        <!-- <a target="_blank" href="https://icons8.com/icon/1737/speedometer">Speedometer</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a> -->
        <!-- <a target="_blank" href="https://icons8.com/icon/7673/treadmill">Treadmill</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a> -->
        <!-- <a target="_blank" href="https://icons8.com/icon/pKhn26TDfnzg/stopwatch">Stopwatch</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a> -->
        <!-- <a target="_blank" href="https://icons8.com/icon/k1l1XFkME39t/exercise">Exercise</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a> -->
        
    </div>
 </body>

<!-- 引入有用到的js函式庫 -->
<script type="text/javascript" src="strftime-min.js"></script>
<script type="text/javascript" src="js-big-decimal.min.js"></script>


<script>   

    // function changeMargin(className) {
    //     console.log(className);
    //     console.log(document.querySelectorAll(className));
    //     document.querySelectorAll(className).forEach(el => {
    //         el.style.marginBottom = "10px";
    //         el.style.marginTop = "10px";
    //     });
    // }

    function mobileCheck() {
        let check = false;
        (function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);
        return check;
    };
    if(!mobileCheck()){
        document.body.style.zoom = 2;
        // changeMargin('box');
    }else{
        document.body.style.zoom = 1.3;
    }
    
    var ui_pace_text1 = document.getElementById('pace_input');
    var ui_pace_text2 = document.getElementById('pace_input2');
    var ui_track_text = document.getElementById('track_input');


    var ui_treadmill_text = document.getElementById('treadmill_input');

    var ui_m100 = document.getElementById('m100_input');
    var ui_m200 = document.getElementById('m200_input');
    var ui_m300 = document.getElementById('m300_input');
    var ui_m400 = document.getElementById('m400_input');
    var ui_m200_increment = document.getElementById('m200_increment');
    var ui_m300_increment = document.getElementById('m300_increment');
    var ui_m400_increment = document.getElementById('m400_increment');

    var ui_finish_time = document.getElementById('finish_time_input');
    // console.log("ui_finish_time: "+ui_finish_time.disabled);


    // 一種把數字後面小數點去掉的方法
    // const toFixedWithoutZeros = (num, precision) =>
    //     num.toFixed(precision).replace(/\.0+$/, '');
    // toFixedWithoutZeros(12.0, 1);
    var input_ui=["pace_input","pace_input2","track_input",
        "m100_input","m200_input","m300_input","m400_input",
        "m200_increment","m300_increment","m400_increment",
        "treadmill_input",
        "finish_time_input",
        "m800_input","m1200_input","m1600_input","m2000_input"
    ];
    
    var input_ui_value = new Array(input_ui.length);
    var seconds_per_lap = 0;
    
    // 取目前畫面上顯示的input value
    function GetInputValue(){    
        for (let index = 0; index < input_ui_value.length; index++) {
            input_ui_value[index] = document.getElementById(input_ui[index]).value;
        }
        return input_ui_value;
    }
    // 把計算結果更新到顯示畫面上
    function UpdateInputValue(result_arr){
        for (let index = 0; index < input_ui_value.length; index++) {
            document.getElementById(input_ui[index]).value = result_arr[index];
        }
    }

    function AllInputDisabled(){
        input_ui.forEach(element => {
            document.getElementById(element).disabled = true;
        });
    }
    function AllInputTempArrayClean(){
        // 暫存結果清空
        input_ui_value = new Array(input_ui.length);
    }
    function AllInputAreaClean(){
        // 顯示結果全清空
        input_ui.forEach(element => {
            document.getElementById(element).value = "";
        });
        var ui_index = [0,1,2,10,11];
        for (let index = 0; index < ui_index.length; index++) {
            document.getElementById(input_ui[ui_index[index]]).style.backgroundColor = "#BDCCCC";
        }
    }
    
    // 沒選到不能輸入
    function DisableTextBox(e){
        var checkid = e.id;
        // console.log("checkid: "+checkid);
        ui_pace_text1.disabled = true;
        ui_pace_text2.disabled = true;

        ui_m100.disabled = true;
        ui_m200.disabled = true;
        ui_m300.disabled = true;
        ui_m400.disabled = true;

        ui_track_text.disabled = true;
        ui_treadmill_text.disabled = true;

        ui_finish_time.disabled = true;

        if (checkid == 'c_pace') {
            ui_pace_text1.disabled = false;
            ui_pace_text2.disabled = false;
            document.getElementById("pace_input").focus();
        } else if (checkid == 'c_track') {
            ui_track_text.disabled = false;
            document.getElementById("track_input").focus();
        } else if (checkid == 'c_treadmill') {
            ui_treadmill_text.disabled = false;
            document.getElementById("treadmill_input").focus();
        } else if (checkid == 'c_track100'){
            ui_m100.disabled = false;
            document.getElementById('m100_input').focus();
        } else if (checkid == 'c_track200'){
            ui_m200.disabled = false;
            document.getElementById('m200_input').focus();
        } else if (checkid == 'c_track300'){
            ui_m300.disabled = false;
            document.getElementById('m300_input').focus();
        } else if (checkid == 'c_track400'){
            ui_m400.disabled = false;
            document.getElementById('m400_input').focus();
        } else if (checkid == 'c_finish_time'){
            ui_finish_time.disabled = false;
            document.getElementById("finish_time_input").focus();
        }
    }
    function DisableTextBox2(e){
        // 做的事情:
        // 1. 全部設 disabled
        // 2. 選到的 disabled = false 然後 focus()
        AllInputDisabled();
        var check_value = e.value+"_input";
        console.log(check_value);
        if(check_value == 'pace_input'){
            document.getElementById(check_value+"2").disabled = false;
            document.getElementById(check_value+"2").style.backgroundColor = "rgb(233, 233, 173)";
        }
        document.getElementById(check_value).disabled = false;
        document.getElementById(check_value).focus();

        
    }

    // 清掉輸入紀錄
    function CleanTextBox(){
        ui_pace_text1.value = "";
        ui_pace_text2.value = "";

        ui_track_text.value = "";
        ui_treadmill_text.value = "";
        ui_m100.value = "";
        ui_m200.value = "";
        ui_m300.value = "";
        ui_m400.value = "";
        ui_m200_increment.value = "";
        ui_m300_increment.value = "";
        ui_m400_increment.value = "";

        ui_finish_time.value = "";

    }

    // 切換選項的動作: 1.把沒選到的disable 2.清掉顯示結果/輸入紀錄
    function ChangeOption(e) {
        DisableTextBox2(e);
        // CleanTextBox();
        // 清掉顯示結果/輸入紀錄
        AllInputAreaClean(); 
        AllInputTempArrayClean();

        // 清掉placeholder
        input_ui.forEach(element => {
            document.getElementById(element).placeholder = "";
        });


        var checked_option = document.querySelector('input[name="type"]:checked').value;
        if(checked_option=="finish_time"){
            document.getElementById("finish_time_input").placeholder = "分:秒/時:分:秒";
        }else if(checked_option=="track"){
            document.getElementById(e.value+"_input").placeholder = "100";
        }else if(checked_option=="treadmill"){
            document.getElementById(e.value+"_input").placeholder = "12";
        }
        else if(checked_option=="pace"){
            document.getElementById(e.value+"_input").placeholder = "3";
            document.getElementById(e.value+"_input2").placeholder = "30";
            document.getElementById(e.value+"_input2").style.backgroundColor = "rgb(233, 233, 173)";
        }
        document.getElementById(e.value+"_input").style.backgroundColor = "rgb(233, 233, 173)";
        
        
        
        
    }

    function ChangeDistance(distance){
        // 當選擇時間時: 只要切換距離就清掉顯示結果
        // 當選擇其他選項時: 每一次切換選項都會根據上半部的track_input欄位計算結果

        var checked_option = document.querySelector('input[name="type"]:checked').value;
        
        // console.log(document.getElementById("dropdown").value);
        var checked_dropdown = document.getElementById("dropdown").value;

        // console.log(checked_option);
        // console.log(e);
        if(checked_option=="finish_time"){
            document.getElementById("finish_time_input").value="";
            document.getElementById("finish_time_input").focus();
            // document.getElementById("finish_time_input").select();
        }
        // document.getElementById("finish_time_input").value = Calculate_finish_time(distance);
        document.getElementById("finish_time_input").value = Calculate_finish_time(checked_dropdown);
        
    }

    var currentLane = document.getElementById("laneNumber").value ;
    

    function ChangeLane(lane) {
        currentLane = lane.value;
        console.log("current lane: "+currentLane);
        Calculate2();

        // 取得select option的text
        var lane_chinese = lane.options[lane.selectedIndex].text;
        document.getElementById('lane-length').innerHTML = "第"+lane_chinese+"　"+currentLane+"m";
        document.getElementById('twolaps').innerHTML = "&emsp;("+currentLane*2+"m)";
        document.getElementById('threelaps').innerHTML = "("+currentLane*3+"m)";
        document.getElementById('fourlaps').innerHTML = "("+currentLane*4+"m)";
        document.getElementById('fivelaps').innerHTML = "("+currentLane*5+"m)";
    }
    function getCurrentLane(){
        return currentLane;
    }


    // 按下enter後執行計算
    function Calculate() {

        // 取目前的input值
        let pace_input1 = ui_pace_text1.value;
        let pace_input2 = ui_pace_text2.value;
        let track_input = ui_track_text.value;
        let treadmill_input = ui_treadmill_text.value;
        

        // 找到被選的選項
        checked = document.querySelector('input[name="type"]:checked').value;
        // console.log(checked);
        
        // 把欲顯示的答案初始化
        let pace_result = ui_pace_text1.value+":"+ui_pace_text2.value;
        let track_result = ui_track_text.value;
        let treadmill_result = ui_treadmill_text.value;    
        
        var pace_result_split;
        var m100,m200,m300,m400;

        if (checked == 'pace') {
            // var hms = pace_input;   // your input string
            // var a = hms.split(':'); // split it at the colons
            // var seconds = Number(a[0])*60+Number(a[1]);
            var seconds = Number(ui_pace_text1.value)*60+Number(ui_pace_text2.value);
            
            track_result = seconds/2.5;
            treadmill_result = Math.round(1440/track_result*100)/100;  

            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,seconds));
        }
        else if (checked == 'track') {
            var seconds = track_input*2.5;
            // new Date(year, month, day, hours, minutes, seconds, milliseconds);
            // var mm_ss_str = strftime('%M:%S', new Date(0,0,0,0,0,seconds));
                // var date = new Date(0,0,0,0,0,seconds);
                // var mm_ss_str = strftime("%M:%S", date);
            // console.log("pace: "+mm_ss_str);
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,seconds));
            treadmill_result = Math.round(1440/track_input*100)/100;
        }
        else if (checked == 'treadmill') {
            track_result = Math.round(1440/treadmill_input*10)/10;
            // var pace_mm_ss = strftime('%M:%S', new Date(0,0,0,0,0,track_sec*2.5));
            // console.log("pace: "+pace_mm_ss);
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));            
        }
        else if (checked == 'm100'){
            track_result = Number(ui_m100.value)*4;
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));
            treadmill_result = Math.round(1440/track_result*100)/100;
        }
        else if (checked == 'm200'){
            track_result = Number(ui_m200.value)*2;
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));
            treadmill_result = Math.round(1440/track_result*100)/100;
        }
        else if (checked == 'm300'){
            track_result = bigDecimal.round(Number(ui_m300.value)/3*4, 1);
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));
            treadmill_result = Math.round(1440/track_result*100)/100;
        }
        else if (checked == 'm400'){
            track_result = Number(ui_m400.value);
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));
            treadmill_result = Math.round(1440/track_result*100)/100;
        }

        
        
        
        else {
            console.log('something\'s wrong')
        }

        pace_result_split = pace_result.split(':');


        // update 結果
        // document.getElementById('pace_input').value = pace_result;
        document.getElementById('pace_input').value = pace_result_split[0];
        document.getElementById('pace_input2').value = pace_result_split[1];

        document.getElementById('track_input').value = track_result;
        document.getElementById('treadmill_input').value = treadmill_result;

        // update 每100結果    
        // var m100 = bigDecimal.round(track_result/4, 1); // value = "123.68"
        
        
        m100 = track_result/4;
        m200 = bigDecimal.round(bigDecimal.add(m100, m100));
        m300 = bigDecimal.round(bigDecimal.add(m200, m100));
        m400 = track_result;
        m100 = bigDecimal.round(m100);
        
        document.getElementById('m100_input').value = m100;
        document.getElementById('m200_input').value = m200;
        document.getElementById('m300_input').value = m300;
        document.getElementById('m400_input').value = m400;
        
        document.getElementById('m200_increment').value = "(+"+bigDecimal.subtract(m200,m100)+")";
        document.getElementById('m300_increment').value = "(+"+bigDecimal.subtract(m300,m200)+")";
        document.getElementById('m400_increment').value = "(+"+bigDecimal.subtract(track_result,m300)+")";

        var distance = document.querySelector('input[name="road"]:checked').value;
        Calculate_finish_time(distance);
    }

    function Calculate2(){
        
        // for (let index = 0; index < input_ui_value.length; index++) {
        //     console.log("id: "+input_ui[index]);
        //     console.log("value: "+input_ui_value[index]);
        // }

        // 取目前的input值
        var temp_arr = GetInputValue();
        var pace_input1 = Number(temp_arr[0]);
        var pace_input2 = Number(temp_arr[1]);
        var track_input = Number(temp_arr[2]);
        var treadmill_input = Number(temp_arr[10]);
        var m100_input = Number(temp_arr[3]);
        var m200_input = Number(temp_arr[4]);
        var m300_input = Number(temp_arr[5]);
        var m400_input = Number(temp_arr[6]);
        var m800_input = Number(temp_arr[12]);
        var m1200_input = Number(temp_arr[13]);
        var m1600_input = Number(temp_arr[14]);
        var m2000_input = Number(temp_arr[15]);

        var lane = getCurrentLane();
        console.log("lane now: "+lane);

        // // 找到被選的選項
        var checked_option = document.querySelector('input[name="type"]:checked').value;

        // 5k 10k 半馬 全馬 完成時間估算
        // var distance = document.querySelector('input[name="road"]:checked').value;
        var distance = document.getElementById("dropdown").value;

        // // 把欲顯示的答案初始化
        var pace_result;
        var track_result = track_input;
        var treadmill_result = treadmill_input;  
        var finish_time_result = document.getElementById("finish_time_input").value;
        seconds_per_lap = 0;
        

        if(checked_option == 'pace'){
            // seconds_per_lap = (pace_input1*60+pace_input2)/2.5;
            // console.log(1000/lane);
            seconds_per_lap = (pace_input1*60+pace_input2)/(1000/lane);
        }
        else if(checked_option == 'track'){
            seconds_per_lap = track_input;
        }
        else if(checked_option == 'treadmill'){
            seconds_per_lap = Math.round(1440/treadmill_input*10)/10;
        }
        else if(checked_option == 'm100'){
            seconds_per_lap = m100_input*4;
        }
        else if(checked_option == 'm200'){
            seconds_per_lap = m200_input*2;
        }
        else if(checked_option == 'm300'){
            seconds_per_lap = m300_input/3*4;
        }
        else if(checked_option == 'm400'){
            seconds_per_lap = m400_input;
        }
        else if(checked_option == 'm800'){
            seconds_per_lap = m800_input/2;
        }
        else if(checked_option == 'm1200'){
            seconds_per_lap = m1200_input/3;
        }
        else if(checked_option == 'm1600'){
            seconds_per_lap = m1600_input/4;
        }
        else if(checked_option == 'm2000'){
            seconds_per_lap = m2000_input/5;
        }
        else if(checked_option == 'finish_time'){
            seconds_per_lap = Calculate_ftime_version(distance);
        }
    
        track_result = seconds_per_lap;
        // pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*2.5));

        // 避免輸入算完後被進位改掉
        if(checked_option == 'pace'){
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,(pace_input1*60+pace_input2)));
        }else{
            pace_result = strftime('%M:%S', new Date(0,0,0,0,0,track_result*(1000/lane)));
        }

        // 避免輸入算完後被進位改掉 treadmill輸入 14,21,22會發生
        // treadmill_result = Math.round(1440/track_result*100)/100;
        // treadmill_result = Math.round(lane/track_result*3600/1000*100)/100;
        // treadmill_result = (lane/track_result*3600/1000).toFixed(2);
        if(checked_option == 'treadmill'){
            treadmill_result = treadmill_input;
        }else{
            treadmill_result = Math.round(lane/track_result*3600/1000*100)/100;
        }
        

        var pace_result_split = pace_result.split(':');

        // 計算每100m時間、increment
        // var m100 = track_result/4;
        var m100 = track_result/(lane/100);
        var m200 = bigDecimal.add(m100, m100);
        var m300 = bigDecimal.add(m200, m100);
        // var m400 = track_result;
        var m400 = bigDecimal.add(m300, m100);
        var m200_increment = "(+"+bigDecimal.round(bigDecimal.subtract(m200,m100),1)+")";
        var m300_increment = "(+"+bigDecimal.round(bigDecimal.subtract(m300,m200),1)+")";
        // var m400_increment = "(+"+bigDecimal.round(bigDecimal.subtract(track_result,m300),1)+")";
        var m400_increment = "(+"+bigDecimal.round(bigDecimal.subtract(m400,m300),1)+")";
        
        //原本是800/1200/1600/..改成跑2圈、3圈...變數名稱沒變
        var m800 = track_result*2;
        var m1200 = track_result*3;
        var m1600 = track_result*4;
        var m2000 = track_result*5;

        // var m800 = m400*2;
        // var m1200 = m400*3;
        // var m1600 = m400*4;
        // var m2000 = m400*5;
        


        m100 = bigDecimal.round(m100); // 調整m100顯示到整數位,分秒顯示
        m200 = bigDecimal.round(m200); // 調整m200顯示到整數位,分秒顯示
        m300 = bigDecimal.round(m300); // 調整m300顯示到整數位,分秒顯示
        m400 = bigDecimal.round(m400); // 調整m400顯示到整數位,分秒顯示
        track_result = bigDecimal.round(track_result); // 調整單圈顯示到小數點第2位,分秒顯示

        m800 = bigDecimal.round(m800); // 調整m400顯示到整數位,分秒顯示
        m1200 = bigDecimal.round(m1200); // 調整m400顯示到整數位,分秒顯示
        m1600 = bigDecimal.round(m1600); // 調整m400顯示到整數位,分秒顯示
        m2000 = bigDecimal.round(m2000); // 調整m400顯示到整數位,分秒顯示

        m100 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m100))); // 調整m100顯示到整數位,分秒顯示
        m200 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m200))); // 調整m200顯示到整數位,分秒顯示
        m300 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m300))); // 調整m300顯示到整數位,分秒顯示
        m400 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m400))); // 調整m400顯示到整數位,分秒顯示
        m800 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m800))); // 調整m100顯示到整數位,分秒顯示
        m1200 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m1200))); // 調整m200顯示到整數位,分秒顯示
        m1600 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m1600))); // 調整m300顯示到整數位,分秒顯示
        m2000 = strftime('%M:%S', new Date(0,0,0,0,0,bigDecimal.round(m2000))); // 調整m400顯示到整數位,分秒顯示



        //塞入結果陣列
        var result_arr = [];
        result_arr.push(pace_result_split[0]);
        result_arr.push(pace_result_split[1]);
        result_arr.push(track_result);
        result_arr.push(m100);
        result_arr.push(m200);
        result_arr.push(m300);
        result_arr.push(m400);
        result_arr.push(m200_increment);
        result_arr.push(m300_increment);
        result_arr.push(m400_increment);
        result_arr.push(treadmill_result);

        // 解決finish_time更新的的work-around: 提前更新 讓Calculate_finish_time(distance)抓的到
        document.getElementById('track_input').value = track_result;
        
        // UpdateInputValue(result_arr);
        // 5k 10k 半馬 全馬 完成時間估算
        // 如果選擇輸入完成時間則不更新(進位問題)
        finish_time_result = Calculate_finish_time(distance);

        result_arr.push(finish_time_result);

        result_arr.push(m800);
        result_arr.push(m1200);
        result_arr.push(m1600);
        result_arr.push(m2000);

        // 更新顯示畫面
        UpdateInputValue(result_arr);
        

        
        

    }

    // 計算完成時間
    function Calculate_finish_time(d) {
        
        var distance = Number(d);
        var time;
        var seconds_per_lap = document.getElementById('track_input').value;
        var finish_time_input = document.getElementById('finish_time_input').value;
        var seconds_per_meter;
        var lane = getCurrentLane();

        // 解決抓取進位問題: 不要都用換算過的track_input
        // // 1. 找到被選的選項
        var checked_option = document.querySelector('input[name="type"]:checked').value;
        if(checked_option=='pace'){
            
            var seconds = Number(document.getElementById('pace_input').value)*60+Number(document.getElementById('pace_input2').value);
            seconds_per_meter = seconds/1000;

        }else if(checked_option=='track'){
            seconds_per_meter = seconds_per_lap/lane;
        }else if(checked_option=='treadmill'){
            // var km_per_hour = Number(document.getElementById('treadmill_input').value);
            // seconds_per_meter = 3600/(km_per_hour*1000);
            // console.log(seconds_per_meter);
            seconds_per_meter = seconds_per_lap/lane;
        }
        
        // console.log("result_400: "+result_400);
        // 測試資料{
        //     配速4:28
        //     操場85
        // }

        //計算速度(s/m),處理進位到小數點2
        time = (distance*seconds_per_meter).toFixed(2); // in seconds
        console.log("### v*distance = time!! ###");
        console.log(time);
        finish_time = strftime('%H:%M:%S', new Date(0,0,0,0,0,time));
        console.log("### finish_time!! ###")
        console.log(finish_time);
        var f_time = finish_time.split(':');
        if(f_time[0]=="00"){
            f_time = f_time[1]+":"+f_time[2]; 
        }else{
            f_time = finish_time;
        }
        var checked_option = document.querySelector('input[name="type"]:checked').value;
        if(checked_option != "finish_time"){
            console.log("return f_time!");
            console.log(f_time);
            // document.getElementById('finish_time_input').value = f_time;
            return f_time;
        }else{
            console.log("return finish_time_input!");
            console.log(finish_time_input);
            // console.log(document.getElementById('finish_time_input').value);
            return finish_time_input;
        }
        
    }
    function Calculate_ftime_version(distance){
        
        // distance 單位: 公尺

        var finish_time_input = document.getElementById('finish_time_input').value;
        var finish_time_split = finish_time_input.split(':');
        var hours,mins,secs;
        var lane = getCurrentLane();

        console.log("cfv: "+finish_time_input);
        
        if(finish_time_split.length == 3){
            hours = parseInt(finish_time_input.split(":")[0]);
            mins = parseInt(finish_time_input.split(":")[1]);
            secs = parseInt(finish_time_input.split(":")[2]);
        }else if(finish_time_split.length == 2){
            hours = 0;
            mins = parseInt(finish_time_input.split(":")[0]);
            secs = parseInt(finish_time_input.split(":")[1]);
        }
        
        mins += hours * 60;
        secs += mins * 60;
        console.log(secs);

        // seconds_per_lap = secs/distance*400;
        seconds_per_lap = secs/distance*lane;

        return seconds_per_lap;
    }


    
    // 實作捲動功能
    let container = document.getElementById('container');
    let slideButton = document.getElementById('slide-button');
    function SlideUpAndDown() {
        container.classList.toggle('SlideDown');
        slideButton.classList.toggle('click-expand');
    }
    //按下按鈕後 增加 slidedown 的class: 設定height為0;
    slideButton.addEventListener('click', SlideUpAndDown);




</script>
</html>